# テストデータベーススキーマのセットアップ

このディレクトリには、Supabase-Rustサンプルを実行するために必要なデータベーススキーマが含まれています。

## 手順

1. [Supabaseダッシュボード](https://app.supabase.com)にログインする
2. プロジェクトを選択する（または新しいプロジェクトを作成する）
3. 左側のメニューから「SQL Editor」を選択する
4. 「+ New Query」をクリックする
5. `create_tables.sql`ファイルの内容をコピーしてエディタに貼り付ける
6. 「Run」ボタンをクリックしてSQLを実行する

## テーブルの説明

### `tasks`テーブル

タスク管理のための基本的なテーブルです。以下のフィールドを持ちます：

- `id`: タスクの一意の識別子（自動インクリメント）
- `title`: タスクのタイトル（必須）
- `description`: タスクの説明文（オプション）
- `is_complete`: タスクの完了状態（デフォルトは`false`）
- `created_at`: タスクの作成日時（デフォルトは現在時刻）
- `user_id`: タスクの所有者ID（UUID、必須）

## 行レベルセキュリティ（RLS）

このスキーマでは、行レベルセキュリティが有効になっており、ユーザーは自分のタスクのみにアクセスできます。以下のポリシーが設定されています：

- 各ユーザーは自分のタスクを読み取り、作成、更新、削除できる
- 他のユーザーのタスクにはアクセスできない

## アクセス権

以下のロールに対して、`tasks`テーブルへのアクセス権が付与されています：

- `anon`: 匿名ユーザー（サインアップ前のユーザー）
- `authenticated`: 認証済みユーザー
- `service_role`: サービスロール（バックエンド処理用） 